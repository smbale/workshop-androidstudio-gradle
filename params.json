{"name":"Workshop: Getting to know Android Studio & Gradle","tagline":"A workshop, originally created for Droidcon Eastern Europe, for introducing people into Android Studio and Gradle","body":"## Table of contents\r\n\r\n- [Introduction](#introduction)\r\n- [Target audience](#target-audience)\r\n- [Requirements](#requirements)\r\n- [Part 1: Import an existing project from Eclipse](#part-1-import-an-existing-project-from-eclipse)\r\n- [Part 2: Meet Android Studio](#part-2-meet-android-studio)\r\n- [Part 3: Setup a gradle project from scratch](#part-3-setup-a-gradle-project-from-scratch)\r\n- [Part 4: Understanding Gradle](#part-4-understanding-gradle)\r\n- [Part 5: Customize the Gradle build](#part-5-customize-the-gradle-build)\r\n- [Part 6: Sign your android app ready for the Play Store](#part-6-sign-your-android-app-ready-for-the-play-store)\r\n- [Helpers](#helpers)\r\n- [Copyright/License](#copyrightlicense)\r\n\r\n##Introduction\r\n\r\nAndroid Studio is an integrated development environment (IDE) for the Android platform. It was announced on 16 May 2013 by Google’s Product Manager, Ellie Powers, at that year’s Google I/O conference. As of June 2013, it is available for users to try (for free) as an early access preview.\r\n\r\n\r\n<iframe width=\"560\" height=\"315\" src=\"//www.youtube-nocookie.com/embed/lmv1dTnhLH4\" frameborder=\"0\" allowfullscreen></iframe>\r\n\r\nThis workshop will take you through the IntelliJ-based IDE as well as the new build process. It will teach you how to create new projects, import exinting ones and how to modify the build script.\r\n\r\n##Target audience\r\n\r\nThis workshop is created for developers with some experience in Android as it won't explain anything regarding Android itself. Experience with Eclipse and ADT helps understand the differences and improvements Android Studio with Gradle brings.\r\n\r\n##Requirements\r\n\r\nTo participate in this hands-on workshop so it's required to bring:\r\n\r\n- a laptop \r\n- a device or emulator running Android 4.0 or better. \r\n\r\nTo make the best of the workshop time it's recommended to download and install the following:\r\n\r\n- Android SDK & Android Studio: [Bundled download here](http://developer.android.com/sdk/installing/studio.html)\r\n- Gradle [Download](http://www.gradle.org/downloads)\r\n- Demo files [Download as ZIP](https://github.com/stefanhoth/workshop-androidstudio-gradle/zipball/master) or [clone the repo](https://github.com/stefanhoth/workshop-androidstudio-gradle/tree/master)\r\n\r\n##Part 1: Import an existing project from Eclipse\r\n\r\nAndroid Studio has not a specific import for Android Eclipse projects yet. Instead it's recommended to export the project **from Eclipse to Gradle**.\r\n\r\n\r\n![Android Studio](https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step1_export.png)\r\n\r\n- Open the project `eclipse_project/DroidconWorkshop` in Eclipse\r\n- Make sure to have the latest Android Developer Tools installed (22.0+)\r\n- Select your project in the Package Explorer\r\n- Select File -> Export...\r\n- Find \"Generate Gradle Build Files\"\r\n- Hit Next\r\n- Select the projects you want to export\r\n- Hit Next\r\n- Review the settings and hit Finish\r\n\r\nNow the project in Android Studio can be imported as a normal Gradle project.\r\n\r\n##Part 2: Meet Android Studio\r\n\r\n![Android Studio](https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step2_android_studio.png \"Android Studio at a glance\")\r\n\r\nTry out:\r\n\r\n- Ctrl+Shift+A for finding an action inside IntelliJ/Android Studio\r\n- Ctrl+N for finding classes anywhere in your project\r\n- Ctrl+Shift+N for finding any files in your project\r\n- Ctrl+Shift+Alt+N for finding any variable (symbol) name in your project\r\n- Find the build settings\r\n- Layout preview pane\r\n- more IntelliJ magic (Activate tip of the day!)\r\n\r\n##Part 3: Setup a Gradle project from scratch\r\n\r\nBefore starting make you your build tools and Android/Google repositories are up to date.\r\n\r\n![Android Studio](https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step3_android-sdk1.png \"Build Tools\")\r\n\r\n![Android Studio](https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step3_android-sdk2.png \"Repositories\")\r\n\r\n##Part 4: Understanding Gradle\r\n\r\n###Project structure\r\n\r\nA typical setup for a gradle looks like this. If you worked with Maven before this should feel very familiar. Following these conventions helps avoid too much configuration.\r\n\r\n    /(project root)\r\n        app/\r\n            libs/ \t\t\t//<-- jar files\r\n            src/\r\n                main/\r\n                    java/   //<-- main code goes here\r\n                    res/\r\n                        drawable-hdpi\r\n                        drawable-mdpi\r\n                        layout\r\n                        values\r\n                        //.. and more\r\n                    AndroidManifest.xml\r\n\r\n                beta/\t\t//<-- code and resources only for the beta-build\r\n                    java/\r\n                    res/\r\n                    AndroidManifest.xml\r\n\r\n        lib1/\r\n            build.gradle\t//<-- use apply plugin: 'android-library'\r\n\r\n        lib2/\r\n            build.gradle\t//<-- use apply plugin: 'android-library'\r\n\r\n        build.gradle\t\t//<-- add android build script dependency here \r\n        settings.gradle\t\t//<-- include all projects\r\n\r\n###Build Variants\r\n\r\nOne goal of the new build system is to enable creating different versions of the same application.\r\n\r\nThe idea is to allow changes like different log properties, debug output or other target servers without recompiling by hand. \r\n\r\n###Product flavors\r\n\r\nA product flavor defines a customized version of the application build by the project. A single project can have different flavors which change the generated application.\r\n\r\nThis new concept is designed to help when the differences are very minimum. If the answer to “Is this the same application?” is yes, then this is probably the preferred way instead of Library Projects.\r\n\r\n\r\nandroid {\r\n    ...\r\n\r\n    defaultConfig {\r\n        minSdkVersion 8\r\n        versionCode 10\r\n    }\r\n\r\n    productFlavors {\r\n        flavor1 {\r\n            packageName \"com.example.flavor1\"\r\n            versionCode 20\r\n        }\r\n\r\n        flavor2 {\r\n            packageName \"com.example.flavor2\"\r\n            minSdkVersion 14\r\n        }\r\n    }\r\n}\r\n\r\n###Overlays\r\n\r\nDuring the build process the more general definitions (e.g. main) get overlaid by more specific definitions/files.\r\n\r\nFor example in the folder example about you can see the ```AndroidManifest.xml``` in the ```beta``` folder. If you are building the ```beta``` build variant the specific one will be overlaid onto the one from main. \r\n\r\n###Gradle vs. gradlew\r\n\r\n```gradlew``` is a wrapper for gradle which helps a team to use the same gradle version. Instead of manually installing it on every machine the wrapper automatically downloads, installs and runs the right gradle version.\r\n\r\n##Part 5: Customize the Gradle build\r\n\r\n###Changing the name of your output apk\r\n\r\nLet's name the project a bit differently and add the version number to the file.\r\n\r\n    android {\r\n        compileSdkVersion 18\r\n        buildToolsVersion \"18.1\"\r\n\r\n        compileOptions.encoding = \"UTF-8\"\r\n\r\n        defaultConfig {\r\n            versionCode 1\r\n            versionName \"0.5.0\"\r\n            minSdkVersion 10\r\n            targetSdkVersion 18\r\n        }\r\n\r\n        //...\r\n        \r\n        applicationVariants.all { variant ->\r\n\r\n            def apk = variant.outputFile;\r\n            def newName = \"\";\r\n\r\n            newName = apk.name.replace(\".apk\", \"-v\" + defaultConfig.versionName + \"-\" + variant.buildType.name.toUpperCase() + \".apk\");\r\n\r\n            newName = newName\r\n                .replace(\"-\" + variant.buildType.name, \"\")\r\n                .replace(project.name, \"AwesomeApp\");\r\n\r\n            variant.outputFile = new File(apk.parentFile, newName);\r\n\r\n            logger.info('INFO: Set outputFile to ' + variant.outputFile + \" for [\" + variant.name + \"]\");\r\n        }\r\n    }\r\n\r\n### Allow to install the debug build along the the Play Store version\r\n\r\n    android {\r\n        \r\n        defaultConfig {\r\n            versionName \"1.0.0\"\r\n        }\r\n\r\n        buildTypes {\r\n            debug {\r\n                packageNameSuffix = \".debug\"\r\n                versionNameSuffix = \"-DEBUG\"\r\n            }\r\n        }\r\n    }\r\n\r\n### Create an alpha build for the Play Store Alpha feature\r\n\r\n\r\n    android {\r\n        \r\n        defaultConfig {\r\n            versionName \"1.0.0\"\r\n        }\r\n\r\n        buildTypes {\r\n            debug {\r\n                packageNameSuffix = \".debug\"\r\n                versionNameSuffix = \"-DEBUG\"\r\n            }\r\n\r\n            alpha.initWith(buildTypes.debug)\r\n            alpha {\r\n                packageNameSuffix = \"\"\r\n                versionNameSuffix = \"-ALPHA\"\r\n                zipAlign true\r\n                signingConfig signingConfigs.release\r\n            }\r\n        }\r\n    }\r\n\r\n##Part 6: Sign your android app ready for the Play Store\r\n\r\nFind ```key\\release.keystore``` and copy it to your project into ```deployment\\release.keystore```\r\n\r\nAdjust ```app\\build.gradle``` to include the key.\r\n\r\n    android {\r\n        signingConfigs {\r\n\r\n        release {\r\n                storeFile file(\"deployment/release.keystore\")\r\n                storePassword \"release\"\r\n                keyAlias \"release\"\r\n                keyPassword \"release\"\r\n            }\r\n        }\r\n        buildTypes {\r\n            \r\n            release {\r\n                signingConfig signingConfigs.release\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nRun the task\r\n\r\n    gradlew assembleRelease\r\n\r\nand you will find the apk in ```app\\build\\apk``` that can be uploaded into the Play Store.\r\n\r\nIt's also possible to do this inside Android Studio by selecting the release build type.\r\n\r\n##Helpers\r\n\r\n- [Google Gradle Plugin Manual](http://tools.android.com/tech-docs/new-build-system/user-guide)\r\n- [Gradle Please](http://gradleplease.appspot.com)\r\n- [Gradle Dependency Helper Plugin for IntelliJ/Android Studio](https://github.com/ligi/GradleDependenciesHelperPlugin)\r\n\r\n##Copyright / License\r\n\r\n<p>\r\n\t<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/de/deed.en\">\r\n\t\t<img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"http://i.creativecommons.org/l/by-sa/3.0/de/80x15.png\" />\r\n\t</a> This <span xmlns:dct=\"http://purl.org/dc/terms/\" href=\"http://purl.org/dc/dcmitype/Text\" rel=\"dct:type\">work</span> by <a xmlns:cc=\"http://creativecommons.org/ns#\" href=\"http://stefanhoth.de\" property=\"cc:attributionName\" rel=\"cc:attributionURL\">Stefan Hoth</a> is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/3.0/de/deed.en\">Creative Commons Attribution-ShareAlike 3.0 Germany License</a>\r\n</p>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}