<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Workshop: Getting to know Android Studio &amp; Gradle by stefanhoth</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/stefanhoth/workshop-androidstudio-gradle">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/stefanhoth/workshop-androidstudio-gradle/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/stefanhoth/workshop-androidstudio-gradle/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Workshop: Getting to know Android Studio &amp; Gradle</h1>
          <p>A workshop, originally created for Droidcon Eastern Europe, for introducing people into Android Studio and Gradle</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/stefanhoth">stefanhoth</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a name="table-of-contents" class="anchor" href="#table-of-contents"><span class="octicon octicon-link"></span></a>Table of contents</h2>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#target-audience">Target audience</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#part-1-import-an-existing-project-from-eclipse">Part 1: Import an existing project from Eclipse</a></li>
<li><a href="#part-2-meet-android-studio">Part 2: Meet Android Studio</a></li>
<li><a href="#part-3-setup-a-gradle-project-from-scratch">Part 3: Setup a gradle project from scratch</a></li>
<li><a href="#part-4-understanding-gradle">Part 4: Understanding Gradle</a></li>
<li><a href="#part-5-customize-the-gradle-build">Part 5: Customize the Gradle build</a></li>
<li><a href="#part-6-sign-your-android-app-ready-for-the-play-store">Part 6: Sign your android app ready for the Play Store</a></li>
<li><a href="#helpers">Helpers</a></li>
<li><a href="#copyrightlicense">Copyright/License</a></li>
</ul><h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>Android Studio is an integrated development environment (IDE) for the Android platform. It was announced on 16 May 2013 by Google’s Product Manager, Ellie Powers, at that year’s Google I/O conference. As of June 2013, it is available for users to try (for free) as an early access preview.</p>



<p>This workshop will take you through the IntelliJ-based IDE as well as the new build process. It will teach you how to create new projects, import exinting ones and how to modify the build script.</p>

<h2>
<a name="target-audience" class="anchor" href="#target-audience"><span class="octicon octicon-link"></span></a>Target audience</h2>

<p>This workshop is created for developers with some experience in Android as it won't explain anything regarding Android itself. Experience with Eclipse and ADT helps understand the differences and improvements Android Studio with Gradle brings.</p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p>To participate in this hands-on workshop so it's required to bring:</p>

<ul>
<li>a laptop </li>
<li>a device or emulator running Android 4.0 or better. </li>
</ul><p>To make the best of the workshop time it's recommended to download and install the following:</p>

<ul>
<li>Android SDK &amp; Android Studio: <a href="http://developer.android.com/sdk/installing/studio.html">Bundled download here</a>
</li>
<li>Gradle <a href="http://www.gradle.org/downloads">Download</a>
</li>
<li>Demo files <a href="https://github.com/stefanhoth/workshop-androidstudio-gradle/zipball/master">Download as ZIP</a> or <a href="https://github.com/stefanhoth/workshop-androidstudio-gradle/tree/master">clone the repo</a>
</li>
</ul><h2>
<a name="part-1-import-an-existing-project-from-eclipse" class="anchor" href="#part-1-import-an-existing-project-from-eclipse"><span class="octicon octicon-link"></span></a>Part 1: Import an existing project from Eclipse</h2>

<p>Android Studio has not a specific import for Android Eclipse projects yet. Instead it's recommended to export the project <strong>from Eclipse to Gradle</strong>.</p>

<p><img src="https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step1_export.png" alt="Android Studio"></p>

<ul>
<li>Open the project <code>eclipse_project/DroidconWorkshop</code> in Eclipse</li>
<li>Make sure to have the latest Android Developer Tools installed (22.0+)</li>
<li>Select your project in the Package Explorer</li>
<li>Select File -&gt; Export...</li>
<li>Find "Generate Gradle Build Files"</li>
<li>Hit Next</li>
<li>Select the projects you want to export</li>
<li>Hit Next</li>
<li>Review the settings and hit Finish</li>
</ul><p>Now the project in Android Studio can be imported as a normal Gradle project.</p>

<h2>
<a name="part-2-meet-android-studio" class="anchor" href="#part-2-meet-android-studio"><span class="octicon octicon-link"></span></a>Part 2: Meet Android Studio</h2>

<p><img src="https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step2_android_studio.png" alt="Android Studio" title="Android Studio at a glance"></p>

<p>Try out:</p>

<ul>
<li>Ctrl+Shift+A for finding an action inside IntelliJ/Android Studio</li>
<li>Ctrl+N for finding classes anywhere in your project</li>
<li>Ctrl+Shift+N for finding any files in your project</li>
<li>Ctrl+Shift+Alt+N for finding any variable (symbol) name in your project</li>
<li>Find the build settings</li>
<li>Layout preview pane</li>
<li>more IntelliJ magic (Activate tip of the day!)</li>
</ul><h2>
<a name="part-3-setup-a-gradle-project-from-scratch" class="anchor" href="#part-3-setup-a-gradle-project-from-scratch"><span class="octicon octicon-link"></span></a>Part 3: Setup a Gradle project from scratch</h2>

<p>Before starting make you your build tools and Android/Google repositories are up to date.</p>

<p><img src="https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step3_android-sdk1.png" alt="Android Studio" title="Build Tools"></p>

<p><img src="https://raw.github.com/stefanhoth/workshop-androidstudio-gradle/gh-pages/images/step3_android-sdk2.png" alt="Android Studio" title="Repositories"></p>

<h2>
<a name="part-4-understanding-gradle" class="anchor" href="#part-4-understanding-gradle"><span class="octicon octicon-link"></span></a>Part 4: Understanding Gradle</h2>

<h3>
<a name="project-structure" class="anchor" href="#project-structure"><span class="octicon octicon-link"></span></a>Project structure</h3>

<p>A typical setup for a gradle looks like this. If you worked with Maven before this should feel very familiar. Following these conventions helps avoid too much configuration.</p>

<pre><code>/(project root)
    app/
        libs/           //&lt;-- jar files
        src/
            main/
                java/   //&lt;-- main code goes here
                res/
                    drawable-hdpi
                    drawable-mdpi
                    layout
                    values
                    //.. and more
                AndroidManifest.xml

            beta/       //&lt;-- code and resources only for the beta-build
                java/
                res/
                AndroidManifest.xml

    lib1/
        build.gradle    //&lt;-- use apply plugin: 'android-library'

    lib2/
        build.gradle    //&lt;-- use apply plugin: 'android-library'

    build.gradle        //&lt;-- add android build script dependency here 
    settings.gradle     //&lt;-- include all projects
</code></pre>

<h3>
<a name="build-variants" class="anchor" href="#build-variants"><span class="octicon octicon-link"></span></a>Build Variants</h3>

<p>One goal of the new build system is to enable creating different versions of the same application.</p>

<p>The idea is to allow changes like different log properties, debug output or other target servers without recompiling by hand. </p>

<h3>
<a name="product-flavors" class="anchor" href="#product-flavors"><span class="octicon octicon-link"></span></a>Product flavors</h3>

<p>A product flavor defines a customized version of the application build by the project. A single project can have different flavors which change the generated application.</p>

<p>This new concept is designed to help when the differences are very minimum. If the answer to “Is this the same application?” is yes, then this is probably the preferred way instead of Library Projects.</p>

<p>android {
    ...</p>

<pre><code>defaultConfig {
    minSdkVersion 8
    versionCode 10
}

productFlavors {
    flavor1 {
        packageName "com.example.flavor1"
        versionCode 20
    }

    flavor2 {
        packageName "com.example.flavor2"
        minSdkVersion 14
    }
}
</code></pre>

<p>}</p>

<h3>
<a name="overlays" class="anchor" href="#overlays"><span class="octicon octicon-link"></span></a>Overlays</h3>

<p>During the build process the more general definitions (e.g. main) get overlaid by more specific definitions/files.</p>

<p>For example in the folder example about you can see the <code>AndroidManifest.xml</code> in the <code>beta</code> folder. If you are building the <code>beta</code> build variant the specific one will be overlaid onto the one from main. </p>

<h3>
<a name="gradle-vs-gradlew" class="anchor" href="#gradle-vs-gradlew"><span class="octicon octicon-link"></span></a>Gradle vs. gradlew</h3>

<p><code>gradlew</code> is a wrapper for gradle which helps a team to use the same gradle version. Instead of manually installing it on every machine the wrapper automatically downloads, installs and runs the right gradle version.</p>

<h2>
<a name="part-5-customize-the-gradle-build" class="anchor" href="#part-5-customize-the-gradle-build"><span class="octicon octicon-link"></span></a>Part 5: Customize the Gradle build</h2>

<h3>
<a name="changing-the-name-of-your-output-apk" class="anchor" href="#changing-the-name-of-your-output-apk"><span class="octicon octicon-link"></span></a>Changing the name of your output apk</h3>

<p>Let's name the project a bit differently and add the version number to the file.</p>

<pre><code>android {
    compileSdkVersion 18
    buildToolsVersion "18.1"

    compileOptions.encoding = "UTF-8"

    defaultConfig {
        versionCode 1
        versionName "0.5.0"
        minSdkVersion 10
        targetSdkVersion 18
    }

    //...

    applicationVariants.all { variant -&gt;

        def apk = variant.outputFile;
        def newName = "";

        newName = apk.name.replace(".apk", "-v" + defaultConfig.versionName + "-" + variant.buildType.name.toUpperCase() + ".apk");

        newName = newName
            .replace("-" + variant.buildType.name, "")
            .replace(project.name, "AwesomeApp");

        variant.outputFile = new File(apk.parentFile, newName);

        logger.info('INFO: Set outputFile to ' + variant.outputFile + " for [" + variant.name + "]");
    }
}
</code></pre>

<h3>
<a name="allow-to-install-the-debug-build-along-the-the-play-store-version" class="anchor" href="#allow-to-install-the-debug-build-along-the-the-play-store-version"><span class="octicon octicon-link"></span></a>Allow to install the debug build along the the Play Store version</h3>

<pre><code>android {

    defaultConfig {
        versionName "1.0.0"
    }

    buildTypes {
        debug {
            packageNameSuffix = ".debug"
            versionNameSuffix = "-DEBUG"
        }
    }
}
</code></pre>

<h3>
<a name="create-an-alpha-build-for-the-play-store-alpha-feature" class="anchor" href="#create-an-alpha-build-for-the-play-store-alpha-feature"><span class="octicon octicon-link"></span></a>Create an alpha build for the Play Store Alpha feature</h3>

<pre><code>android {

    defaultConfig {
        versionName "1.0.0"
    }

    buildTypes {
        debug {
            packageNameSuffix = ".debug"
            versionNameSuffix = "-DEBUG"
        }

        alpha.initWith(buildTypes.debug)
        alpha {
            packageNameSuffix = ""
            versionNameSuffix = "-ALPHA"
            zipAlign true
            signingConfig signingConfigs.release
        }
    }
}
</code></pre>

<h2>
<a name="part-6-sign-your-android-app-ready-for-the-play-store" class="anchor" href="#part-6-sign-your-android-app-ready-for-the-play-store"><span class="octicon octicon-link"></span></a>Part 6: Sign your android app ready for the Play Store</h2>

<p>Find <code>key\release.keystore</code> and copy it to your project into <code>deployment\release.keystore</code></p>

<p>Adjust <code>app\build.gradle</code> to include the key.</p>

<pre><code>android {
    signingConfigs {

    release {
            storeFile file("deployment/release.keystore")
            storePassword "release"
            keyAlias "release"
            keyPassword "release"
        }
    }
    buildTypes {

        release {
            signingConfig signingConfigs.release
        }
    }
}
</code></pre>

<p>Run the task</p>

<pre><code>gradlew assembleRelease
</code></pre>

<p>and you will find the apk in <code>app\build\apk</code> that can be uploaded into the Play Store.</p>

<p>It's also possible to do this inside Android Studio by selecting the release build type.</p>

<h2>
<a name="helpers" class="anchor" href="#helpers"><span class="octicon octicon-link"></span></a>Helpers</h2>

<ul>
<li><a href="http://tools.android.com/tech-docs/new-build-system/user-guide">Google Gradle Plugin Manual</a></li>
<li><a href="http://gradleplease.appspot.com">Gradle Please</a></li>
<li><a href="https://github.com/ligi/GradleDependenciesHelperPlugin">Gradle Dependency Helper Plugin for IntelliJ/Android Studio</a></li>
</ul><h2>
<a name="copyright--license" class="anchor" href="#copyright--license"><span class="octicon octicon-link"></span></a>Copyright / License</h2>

<p>
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/de/deed.en">
        <img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/de/80x15.png"></a> This work by <a href="http://stefanhoth.de" rel="cc:attributionURL">Stefan Hoth</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/de/deed.en">Creative Commons Attribution-ShareAlike 3.0 Germany License</a>
</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>